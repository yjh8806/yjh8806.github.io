{"version":3,"sources":["pages/Upload.js"],"names":["Upload","React","memo","props","dispatch","useDispatch","is_login","useSelector","state","user","post_list","post","list","my_post","myPost","color","theme","radius","fontSize","post_address","loc","longitude","latitude","post_id","match","params","id","is_edit","post_idx","findIndex","p","parseInt","my_post_idx","_post","length","useEffect","document","querySelector","scrollTo","top","left","behavior","logger","customAlert","sweetConfirmReload","window","userAction","loginCheck","past_post","title","headCount","foodCategory","category","place","address","detail_place","detail_address","appointmentTime","orderTime","appointmentDate","orderDate","contents","restaurant","shop","meeting","place_url","useState","post_info","setPostInfo","today","moment","format","now_time","minHeight","margin","shape","height","onChange","value","find_address","location","padding","maxWidth","bg","bg0","brand100","border","button","cursor","_onClick","disabled","sweetOK","then","select_time","split","join","postAction","editPostAX","bold2","size","base","addPostAX"],"mappings":"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","file":"static/js/26.783c78ee.chunk.js","sourcesContent":["// 모임 만들기 및 모임 만들기 수정 페이지\nimport React from \"react\";\nimport moment from \"moment\";\nimport logger from \"../shared/Console\";\nimport { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { actionCreators as postAction } from \"../redux/modules/post\";\nimport { actionCreators as userAction } from \"../redux/modules/user\";\n\n// style\nimport theme from \"../styles/theme\";\nimport Spinner from \"../shared/Spinner\";\nimport { Button, Grid, Text } from \"../elements\";\nimport { UploadInput, UploadContents, Header, PcSide } from \"../components\";\nimport { customAlert } from \"../components/Sweet\";\n\nconst Upload = React.memo((props) => {\n  const dispatch = useDispatch();\n  const is_login = useSelector((state) => state.user.is_login);\n  // 홈에서의 접근인 경우\n  const post_list = useSelector((state) => state.post.list);\n\n  // 홈에서의 접근이 아닌 내가쓴 글에서의 접근인 경우 반별\n  // 내가쓴 글일 경우 user의 myPost array가 있음\n  const my_post = useSelector((state) => state.user?.myPost);\n\n  // style\n  const { color, radius, fontSize } = theme;\n\n  const post_address = useSelector((state) => state.loc.post_address);\n  const longitude = post_address?.longitude;\n  const latitude = post_address?.latitude;\n\n  // 수정판별\n  const post_id = props.match.params.id;\n  const is_edit = post_id ? true : false;\n\n  // 수정에 접근 한 경로 판별 후 이후 행동 결정\n  const post_idx = is_edit\n    ? post_list.findIndex((p) => p.post_id === parseInt(post_id))\n    : null;\n  const my_post_idx = is_edit\n    ? my_post.findIndex((p) => p.post_id === parseInt(post_id))\n    : null;\n\n  // post_list의 배열이 있는 경우 post 모듈에서 정보를 가지고 오기\n  // 반대의 경우 내가 쓴 글이므로 user의 게시글 정보 가지고 오기\n  let _post = post_list.length > 0 ? post_list[post_idx] : my_post[my_post_idx];\n\n  React.useEffect(() => {\n    document\n      .querySelector(\"body\")\n      .scrollTo({ top: 0, left: 0, behavior: \"instant\" });\n      // 잘못된 접근일 경우 예외 처리\n    if (is_edit && !_post) {\n      customAlert.sweetConfirmReload(\n        \"해당게시물을 찾을 수 없습니다.\",\n        null,\n        \"goBack\"\n      );\n      return;\n    }\n\n    logger(\"post 수정 전 내용\", _post);\n    logger(\"post 수정 전 내용\", is_edit);\n  }, []);\n\n  React.useEffect(() => {\n    window.scrollTo(0, 0);\n    dispatch(userAction.loginCheck(\"/upload\"));\n  }, []);\n\n  // 수정하는 상황인 경우 수정 될 이전 내용 불러오기\n  const past_post = {\n    title: _post?.title,\n    headCount: _post?.headCount,\n    foodCategory: _post?.category,\n    place: _post?.address,\n    detail_place: _post?.detail_address,\n    appointmentTime: _post?.orderTime,\n    appointmentDate: _post?.orderDate,\n    contents: _post?.contents,\n    restaurant: _post?.shop,\n    longitude: longitude,\n    latitude: latitude,\n    meeting: _post?.meeting,\n    place_url: _post?.place_url,\n  };\n  const [post_info, setPostInfo] = useState(_post ? { ...past_post } : {});\n  const today = moment().format(\"YYYY-MM-DD\");\n  const now_time = moment().format(\"HH:mm\");\n\n  const uploadBtn = () => {\n    // 모집글 작성 시 상위, 하위 컴포넌트들에서 올바르지 않은 value있을때 처리하는 과정\n    if (post_info.disabled) {\n      return customAlert\n        .sweetOK(\n          \"입력 가능한 글자수를 초과했어요\",\n          \"모집글 작성 시 255자 이내로 작성해주세요.\"\n        )\n        .then(() => {\n          return;\n        });\n    }\n\n    if (!post_info.title || post_info.title === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`모집글의 /제목/을 작성해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info.contents || post_info.contents === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`모집글의 /내용/을 작성해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info?.place || post_info?.place === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [\"만날 장소에서 주소 찾기 버튼을 눌러\", `주소;를 입력해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info?.detail_place || post_info?.detail_place === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`상세 주소;를 작성해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info.restaurant || post_info.restaurant === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [\"배달 예정인 식당 ;이름을 적어주세요.\"],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info.headCount || post_info.headCount === \"0\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`모집 인원 수;를 선택해주세요.`],\n        \"\"\n      );\n      return;\n    }\n\n    // 모집 날짜, 시간의 경우 디폴트 값으로 현재 시간, 날짜 넣음\n    post_info.appointmentDate = post_info.appointmentDate ?? today;\n    post_info.appointmentTime = post_info.appointmentTime ?? now_time;\n\n    // 시간의 경우 날짜가 내일 이후면 어떤 시간도 상관없지만 오늘일 경우 현재시간 이전일 수 없어서 조건 줌\n    if (post_info.appointmentDate === today) {\n      const select_time = parseInt(\n        post_info.appointmentTime.split(\":\").join(\"\")\n      );\n      const time_now = parseInt(now_time.split(\":\").join(\"\"));\n\n      // 선택시간이 과거인 경우\n      if (time_now >= select_time) {\n        return customAlert.sweetConfirmReload(\n          \"배달 주문 예정 시간을 확인해주세요\",\n          [\"현재시간보다 과거로 설정됐어요.\"],\n          \"\"\n        );\n      }\n    }\n\n    if (!post_info.foodCategory || post_info.foodCategory === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`음식의 /카테고리/를 선택해주세요.`],\n        \"\"\n      );\n      return;\n    }\n\n    if (!post_info.meeting || post_info.meeting === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`모집 유형;을 선택해주세요.`],\n        \"\"\n      );\n      return;\n    }\n\n    logger(\"post 업로드 상태\", post_info);\n    delete post_info.disabled;\n    dispatch(postAction.addPostAX(post_info));\n  };\n\n  const UploadEditBtn = () => {\n    logger(\"수정 버튼, post_info\", post_info);\n\n    // 모집글 작성 시 상위, 하위 컴포넌트들에서 올바르지 않은 value있을때 처리하는 과정\n    if (post_info.disabled) {\n      return customAlert\n        .sweetOK(\n          \"입력 가능한 글자수를 초과했어요\",\n          \"모집글 작성 시 255자 이내로 작성해주세요.\"\n        )\n        .then(() => {\n          return;\n        });\n    }\n    if (!post_info.title || post_info.title === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`모집글의 /제목/을 작성해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info.contents || post_info.contents === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`모집글의 /내용/을 작성해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info.place || post_info.place === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [\"만날 장소에서 주소 찾기 버튼을 눌러\", `주소;를 입력해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info?.detail_place || post_info?.detail_place === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`상세 주소;를 작성해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info.restaurant || post_info.restaurant === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [\"배달 예정인 식당; 이름을 적어주세요.\"],\n        \"\"\n      );\n      return;\n    }\n    if (!post_info.headCount || post_info.headCount === \"0\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`모집 인원 수;를 선택해주세요.`],\n        \"\"\n      );\n      return;\n    }\n\n    // 시간의 경우 날짜가 내일 이후면 어떤 시간도 상관없지만 오늘일 경우 현재시간 이전일 수 없어서 조건 줌\n    if (post_info.appointmentDate === today) {\n      const select_time = parseInt(\n        post_info.appointmentTime.split(\":\").join(\"\")\n      );\n      const time_now = parseInt(now_time.split(\":\").join(\"\"));\n\n      // 선택시간이 과거인 경우\n      if (time_now > select_time) {\n        return customAlert.sweetConfirmReload(\n          \"배달 주문 예정 시간을 확인해주세요\",\n          [\"현재시간보다 과거로 설정됐어요.\"],\n          \"\"\n        );\n      }\n    }\n    if (!post_info.foodCategory || post_info.foodCategory === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`음식의 /카테고리/를 선택해주세요.`],\n        \"\"\n      );\n      return;\n    }\n\n    if (!post_info.meeting || post_info.meeting === \"\") {\n      customAlert.sweetConfirmReload(\n        \"앗 빈칸이 있어요\",\n        [`모집 유형;을 선택해주세요.`],\n        \"\"\n      );\n      return;\n    }\n    delete post_info.disabled;\n    dispatch(\n      postAction.editPostAX(\n        post_id,\n        post_info,\n        my_post.length > 0 ? \"/mypost\" : null\n      )\n    );\n  };\n\n  if (is_login) {\n    return (\n      <>\n        <PcSide {...props} />\n        <Grid\n          minHeight=\"100vh\"\n          margin=\"0 auto\"\n        >\n          <Grid shape=\"container\">\n            <Header {...props} shape=\"모임 만들기\" />\n            <Grid height=\"4.4rem\" />\n            {/* 모임 만들기 텍스트 인풋 모음 */}\n            <UploadContents\n              post_info={post_info}\n              // 하위에서 상위로 데이터 올리기\n              onChange={(value) => setPostInfo({ ...post_info, ...value })}\n            />\n\n            {/* 모임 만들기 input 모음 */}\n            <UploadInput\n              post_info={post_info}\n              find_address={props.location.state?.address}\n              // 하위에서 상위로 데이터 올리기\n              onChange={(value) => setPostInfo({ ...post_info, ...value })}\n            />\n            \n            {/* 최초 업로드, 수정 여부 판별 후 버튼 바꾸기 */}\n            <Grid padding=\"0 2rem\">\n              <Grid\n                height=\"auto\"\n                maxWidth=\"36rem\"\n                margin=\"0\"\n                padding=\"2.8rem 0 2.7rem\"\n                bg={color.bg0}\n              >\n                {is_edit ? (\n                  <Button\n                    bg={color.brand100}\n                    height=\"5rem\"\n                    border=\"none\"\n                    radius={radius.button}\n                    cursor=\"t\"\n                    _onClick={UploadEditBtn}\n                  >\n                    <Text color={color.bg0} bold2=\"700\" size={fontSize.base}>\n                      모집글 수정하기\n                    </Text>\n                  </Button>\n                ) : (\n                  <Button\n                    bg={color.brand100}\n                    height=\"5rem\"\n                    border=\"none\"\n                    radius={radius.button}\n                    cursor=\"t\"\n                    _onClick={uploadBtn}\n                  >\n                    <Text color={color.bg0} bold2=\"700\" size={fontSize.base}>\n                      밀착할 사람 모집하기\n                    </Text>\n                  </Button>\n                )}\n              </Grid>\n            </Grid>\n          </Grid>\n        </Grid>\n      </>\n    );\n  } else {\n    return <Spinner />;\n  }\n});\n\nexport default Upload;\n"],"sourceRoot":""}